<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:p="http://primefaces.org/ui">
        <ui:composition template="template/layout.xhtml">
            <ui:define name="content">
                <h:form style="padding:0px;border:solid 0px #fff;">
                    <c:choose>                        
                        <c:when test="#{fb.logged}">
                            <p:tabMenu activeIndex="0" style="font-size:13px;">
                                <p:menuitem value="Top 20" url="?g=201514949865358"/>
                                <p:menuitem value="Grupos" url="?g=201514949865358"/>
                                <p:menuitem value="Más influyentes el día de ayer" disabled="true" url="/ui/tabMenuDemos.jsf"/>
                                <p:menuitem value="Más influyentes el mes pasado" disabled="true" url="/ui/tabMenuDocumentation.jsf"/>
                            </p:tabMenu>
                            <div style="font-size:12px;">
                                <c:choose>
                                    <c:when test="#{group.groupInformation.groupId == 1}">
                                        Top 20 de los developers más influyentes en todos los grupos de desarrollo en República Dominicana,
                                        se analizaron #{group.groupInformation.postAmount} publicaciones, 
                                        y #{group.groupInformation.commentsAmount} comentarios.
                                        <br/>
                                        La cantidad mínima interacciones para entrar en el top es #{group.groupInformation.minInteractions}
                                        <br/><br/>
                                    </c:when>
                                    <c:otherwise>
                                        Top 20 de los developers más influyentes en el grupo #{group.groupInformation.groupName},
                                        se analizaron #{group.groupInformation.postAmount} publicaciones, 
                                        y #{group.groupInformation.commentsAmount} comentarios.
                                        <br/>
                                        La cantidad mínima interacciones para entrar en el top es #{group.groupInformation.minInteractions}
                                        <br/><br/>
                                    </c:otherwise>
                                </c:choose>
                            </div>
                            <p:dataGrid var="dev" value="#{top.top20}" columns="6"
                                rows="20" paginator="false"
                                paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                rowsPerPageTemplate="9,12,15">

                                <p:panel header="##{dev.position} #{dev.fullName}" style="font-size:12px;text-align:center;width:90%;">
                                    <h:panelGrid columns="1" style="width:130px;text-align: left;">
                                        <p:graphicImage value="#{dev.picture}" height="80"/>
                                        <b>Rating:</b> #{dev.ratio}<br/>
                                        <b>Posts:</b> #{dev.postsCount}<br/>
                                        <b>Comments:</b> #{dev.messagesCount}<br/>
                                        <b>Likes:</b> #{dev.likesCount}<br/>
                                        <b>Mentions:</b> #{dev.mentionsCount}<br/>
                                    </h:panelGrid>
                                </p:panel>

                            </p:dataGrid>

                            <!--
                            <p:ring id="top20devs" value="#{top.top20}" var="dev" rendered="true"
                                    styleClass="image-ring" easing="easeInOutBack" 
                                    style="height:200px;position:relative;top:-30px;width:95%;">
                                #{dev.fullName}x
                                <p:graphicImage value="#{dev.picture}" width="50"/>
                            </p:ring>
                            -->
                        </c:when>
                        <c:otherwise>
                            <h:outputText value="#{fb.loginButton}" escape="false" />
                        </c:otherwise>
                    </c:choose>
                </h:form>
            </ui:define>
        </ui:composition>
    </html>      